// Pylon Typography Variables â€” Generated by figma-sync
// Execute via Figma Console MCP (figma_execute)

const collections = await figma.variables.getLocalVariableCollectionsAsync();
let collection = collections.find(c => c.name === "Pylon/Typography");
if (!collection) {
  collection = figma.variables.createVariableCollection("Pylon/Typography");
}
const modeId = collection.modes[0].modeId;

async function upsertFloat(name, value, scope) {
  const existing = (await figma.variables.getLocalVariablesAsync("FLOAT"))
    .find(v => v.name === name && v.variableCollectionId === collection.id);
  const variable = existing || figma.variables.createVariable(name, collection, "FLOAT");
  variable.setValueForMode(modeId, value);
  variable.scopes = [scope];
}

// Line-height values are in px (fontSize * lineHeightRatio)
const styles = [
  ["display-1", 48, 700, 55.2, -0.025],
  ["display-2", 40, 700, 48, -0.02],
  ["h1", 32, 700, 40, -0.015],
  ["h2", 28, 600, 36.4, -0.01],
  ["h3", 24, 600, 31.2, -0.01],
  ["h4", 20, 600, 27, 0],
  ["h5", 18, 600, 25.2, 0],
  ["h6", 16, 600, 22.4, 0],
  ["body-lg", 17, 400, 27.2, 0],
  ["body", 15, 400, 24, 0.01],
  ["body-sm", 13, 400, 19.5, 0.01],
  ["caption", 12, 500, 16.8, 0.015],
  ["overline", 11, 600, 15.4, 0.08],
  ["label", 13, 600, 18.2, 0.02],
  ["small", 11, 400, 15.4, 0.01]
];

for (const [name, size, weight, lh, ls] of styles) {
  await upsertFloat("font-size/" + name, size, "FONT_SIZE");
  await upsertFloat("font-weight/" + name, weight, "FONT_WEIGHT");
  await upsertFloat("line-height/" + name, lh, "LINE_HEIGHT");
  await upsertFloat("letter-spacing/" + name, ls, "LETTER_SPACING");
}

const count = (await figma.variables.getLocalVariablesAsync("FLOAT"))
  .filter(v => v.variableCollectionId === collection.id).length;
console.log("\u2713 Pylon typography synced: " + count + " variables");
